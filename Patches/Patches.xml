<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  
  <!-- Add our custom StatPart to BedRestEffectiveness stat -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/StatDef[defName="BedRestEffectiveness"]/parts</xpath>
    <value>
      <li Class="QualityFurnitureMatters.StatPart_FacilityQuality" />
    </value>
  </Operation>

  <!--
    NOTE: We avoid changing EndTable.maxSimultaneous here to maximize compatibility
    with other mods. The StatPart caps contributions to 2 end tables / 1 dresser
    (up to 3 total) without altering placement rules. If you want placement to
    allow two end tables per bed, change the original game defs or keep a small
    optional patch in a fork.
  -->

  <!-- Add BedRestEffectiveness stat to EndTable so it shows in furniture stats (base: 1%) -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName="EndTable"]/statBases</xpath>
    <value>
      <BedRestEffectiveness>0.01</BedRestEffectiveness>
    </value>
  </Operation>

  <!-- Add BedRestEffectiveness stat to Dresser so it shows in furniture stats (base: 2%) -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName="Dresser"]/statBases</xpath>
    <value>
      <BedRestEffectiveness>0.02</BedRestEffectiveness>
    </value>
  </Operation>

  <!-- 
    Dresser already has maxSimultaneous=1, which is correct.
    No patch needed for dresser count.
  -->

</Patch>
